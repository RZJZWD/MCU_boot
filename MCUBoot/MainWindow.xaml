<Window x:Class="MCUBoot.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:local="clr-namespace:MCUBoot"
        mc:Ignorable="d"
        Title="MCU串口助手" Height="600" Width="850">
    <Grid Margin="6">

        <Grid.RowDefinitions>
            <RowDefinition Height="25"/>
            <RowDefinition Height="3*"/>
            <RowDefinition Height="2*"/>
        </Grid.RowDefinitions>
        
        <!--模式切换-->
        <StackPanel Orientation="Horizontal" Grid.Row="0">
            <Label Content="串口模式" />
            <Label Content="Boot模式" />
        </StackPanel>
        
        <!--中间区域-->
        <Grid Grid.Row="1">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="auto"/>
                <ColumnDefinition Width="3*"/>
                <ColumnDefinition Width="1*"/>
            </Grid.ColumnDefinitions>
            
            <!--左串口设置区域-->
            <GroupBox   Grid.Column="0" Header="串口设置" Margin="2">
                <StackPanel Orientation="Vertical">
                    <!--串口选择-->
                    <StackPanel Orientation="Horizontal" HorizontalAlignment="Right">
                        <Label Content="串口:"/>
                        <ComboBox x:Name="cmbPortName" Width="80" Margin="2"/>
                    </StackPanel>
                
                    <!--波特率-->
                    <StackPanel Orientation="Horizontal" HorizontalAlignment="Right">
                        <Label Content="波特率:"/>
                        <ComboBox x:Name="cmbBaudRate"  IsEditable="True" Width="80" Margin="2">
                            <ComboBoxItem Content="9600" IsSelected="True"/>
                            <ComboBoxItem Content="19200"/>
                            <ComboBoxItem Content="38400"/>
                            <ComboBoxItem Content="57600"/>
                            <ComboBoxItem Content="115200"/>
                        </ComboBox>
                    </StackPanel>
                
                    <!--数据位-->
                    <StackPanel Orientation="Horizontal" HorizontalAlignment="Right">
                        <Label Content="数据位:"/>
                        <ComboBox x:Name="cmbDateBits" Width="80" Margin="2">
                            <ComboBoxItem Content="7"/>
                            <ComboBoxItem Content="8" IsSelected="True"/>
                        </ComboBox>
                    </StackPanel>
                
                    <!--停止位-->
                    <StackPanel Orientation="Horizontal" HorizontalAlignment="Right">
                        <Label Content="停止位:"/>
                        <ComboBox x:Name="cmbStopBits" Width="80" Margin="2">
                            <ComboBoxItem Content="1" IsSelected="True"/>
                            <ComboBoxItem Content="1.5"/>
                            <ComboBoxItem Content="2"/>
                        </ComboBox>
                    </StackPanel>
                
                    <!--校验位-->
                    <StackPanel Orientation="Horizontal" HorizontalAlignment="Right">
                        <Label Content="校验位:"/>
                        <ComboBox x:Name="cmbParity" Width="80" Margin="2">
                            <ComboBoxItem Content="无" IsSelected="True"/>
                            <ComboBoxItem Content="奇校验"/>
                            <ComboBoxItem Content="偶校验"/>
                        </ComboBox>
                    </StackPanel>
                    
                    <!--使能DTR-->
                    <CheckBox x:Name="chkEnableDTR" Content="DTR" Margin="20,2,2,2" />
                    
                    <!--开启/关闭串口-->
                    <StackPanel Orientation="Horizontal" HorizontalAlignment="Right">
                        <Ellipse x:Name="COMSwitchLight" Width="10" Height="10" Fill="Black" Margin="10,10,2,3"/>
                        <Button x:Name="BtnCOMSwitch" HorizontalAlignment="Right" Content="开启串口" Width="80" Margin="10,10,2,3" Click="BtnCOMSwitch_Click"/>
                        
                    </StackPanel>

                    
                    <GroupBox Header="杂项设置">
                        <StackPanel Orientation="Vertical" HorizontalAlignment="Center">
                            <CheckBox x:Name="chkRecvAutoWrap" Content="自动换行"  Checked="chkRecvAutoWrap_Changed" Unchecked="chkRecvAutoWrap_Changed"/>
                            <CheckBox x:Name="chkAutoScroll" Content="自动滚动"  Checked="chkAutoScroll_Changed" Unchecked="chkAutoScroll_Changed"/>
                            <CheckBox x:Name="chkShowSend" Content="显示发送"  Checked="chkShowSend_Changed" Unchecked="chkShowSend_Changed"/>
                            <CheckBox x:Name="chkRecvShowRowNum" Content="显示行号" Checked="chkRecvShowRowNum_Changed" Unchecked="chkRecvShowRowNum_Changed"/>
                            <CheckBox x:Name="chkRecvShowTxRx" Content="显示TX RX" Checked="chkRecvShowTxRx_Changed" Unchecked="chkRecvShowTxRx_Changed"/>
                        </StackPanel>
                    </GroupBox>
                    
                </StackPanel>
            </GroupBox>
        
            <!--中接收区-->
            <GroupBox  Grid.Column="1" Header="串口接收区" Margin="2">
                <Grid>
                    <TextBox x:Name="comReceived" 
                             IsReadOnly="True" 
                             VerticalScrollBarVisibility="Visible" 
                             TextWrapping="Wrap" 
                             AcceptsReturn="True" 
                             FontFamily="Consolas"
                             Background="#FFF5F5F5"/>
                </Grid>
            </GroupBox>
        
            <!--右接收设置区-->
            <GroupBox Grid.Column="2" Header="接收设置" Margin="2">
                <StackPanel Orientation="Vertical">
                    <!--接收区设置-->
                    <StackPanel Orientation="Horizontal"  >
                        <Button x:Name="BtnClearReceivedArea" Content="清空接收区" Margin="10,2,2,2" HorizontalAlignment="Left" Click="BtnClearReceivedArea_Click"/>
                        <Button x:Name="BtnPauseShowReceived" Content="暂停显示" Margin="20,2,2,2" HorizontalAlignment="Right" Click="BtnPauseShowReceived_Click"/>
                    </StackPanel>

                    <!--启用帧处理 如果设置了帧头帧尾-->
                    <CheckBox x:Name="chkEnableFrame" Content="启用帧处理" Margin="10" Checked="chkEnableFrame_Changed" Unchecked="chkEnableFrame_Changed"/>
                    
                    <!--保存接收区到txt文件-->
                    <GroupBox Header="接收区处理">
                        <StackPanel Orientation="Vertical">
                            <StackPanel Orientation="Horizontal">
                                <Button x:Name="BtnSaveRece2File" Content="保存为文件" Margin="0,2,2,2" Click="BtnSaveRece2File_Click" />
                                <Button x:Name="BtnBrowseFilePath" Content="浏览文件" Margin="10,2,2,2" Click="BtnBrowseFilePath_Click"/>
                            </StackPanel>
                            <!--显示文件路径-->
                            <TextBox x:Name="FilePathTextBox" IsReadOnly="True" Margin="5"/>
                        </StackPanel>
                    </GroupBox>
                    


                    <!--接收区显示方式-->
                    <GroupBox Header="显示数据解码">
                        <ComboBox x:Name="receDeCode" Width="100" HorizontalAlignment="Left" SelectionChanged="receDeCode_SelectionChanged">
                            <ComboBoxItem Content="ASCII"/>
                            <ComboBoxItem Content="UTF-8" IsSelected="True"/>
                            <ComboBoxItem Content="GB2312"/>
                            <ComboBoxItem Content="十六进制 HEX"/>
                            <ComboBoxItem Content="十进制 DEC"/>
                            <ComboBoxItem Content="八进制 OCT"/>
                            <ComboBoxItem Content="二进制 BIN"/>
                        </ComboBox>
                    </GroupBox>

                    <GroupBox Header="串口信息">
                        <Label x:Name="receiveFrame" Content="接收帧数"/>
                    </GroupBox>
                </StackPanel>
            </GroupBox>
        </Grid>

        <!--底部区域-->
        <Grid Grid.Row="2">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="auto"/>
                <ColumnDefinition Width="2*"/>
                <ColumnDefinition Width="auto"/>
            </Grid.ColumnDefinitions>

            <!--左模式设置区-->
        
            <!--中发送区-->
            <GroupBox Grid.Column="1" Header="串口发送" Margin="2">
                <Grid>
                    <TextBox x:Name="comSend" 
                             IsReadOnly="False" 
                             VerticalScrollBarVisibility="Visible" 
                             HorizontalScrollBarVisibility="Visible" 
                             AcceptsReturn="True" 
                             FontFamily="Consolas"
                             Background="#FFF5F5F5"/>
                </Grid>
            </GroupBox>

            <!--右发送设置区-->
            <GroupBox Grid.Column="2" Header="发送设置" Margin="2">
                <StackPanel Orientation="Vertical">
                    <!--接收区设置-->
                    <StackPanel Orientation="Horizontal" Margin="2">
                        <Button x:Name="BtnSend" Content="发送" Margin="15,5,2,2" HorizontalAlignment="Right" Click="BtnSend_Click"/>
                        <Button x:Name="BtnClearSendArea" Content="清空发送区" Margin="15,5,2,2" HorizontalAlignment="Left" Click="BtnClearSendArea_Click"/>
                    </StackPanel>
                    
                    <!--定时发送-->
                    <StackPanel Orientation="Horizontal" Margin="2">
                        <CheckBox x:Name="chkAutoSend" Content="定时发送" Margin="2,5,2,5" Checked="chkAutoSend_Changed" Unchecked="chkAutoSend_Changed"/>
                        <TextBox x:Name="AutoSendInterval" Width="50" Margin="2,2,0,2" Text="1000"/>
                        <Label Content="ms"/>
                    </StackPanel>
                    
                    
                    <!--发送端设置帧头帧尾以及帧处理-->
                    <StackPanel Orientation="Horizontal">
                        <Label Content="帧头"/>
                        <TextBox x:Name="FrameHeader"
                                 Width="80"
                                 Margin="5,2,2,2"
                                 HorizontalAlignment="Right"
                                 IsReadOnly="False" 
                                 FontFamily="Consolas"/>
                    </StackPanel>
                    <StackPanel Orientation="Horizontal">
                        <Label Content="帧尾"/>
                        <TextBox x:Name="FrameFooter"
                                 Width="80"
                                 Margin="5,2,2,2"
                                 HorizontalAlignment="Right"
                                 IsReadOnly="False" 
                                 FontFamily="Consolas"/>
                    </StackPanel>

                    <!--发送区发送编码方式-->
                    <GroupBox Header="发送数据编码格式">
                        <StackPanel Orientation="Vertical">
                            <ComboBox x:Name="sendEnCode" Width="100" SelectionChanged="sendEnCode_SelectionChanged" >
                                <ComboBoxItem Content="ASCII"/>
                                <ComboBoxItem Content="UTF-8" IsSelected="True"/>
                                <ComboBoxItem Content="GB2312"/>
                                <ComboBoxItem Content="十六进制 HEX"/>
                                <ComboBoxItem Content="十进制 DEC"/>
                                <ComboBoxItem Content="八进制 OCT"/>
                                <ComboBoxItem Content="二进制 BIN"/>
                            </ComboBox>
                        </StackPanel>
                    </GroupBox>
                    
                    <StackPanel Orientation="Horizontal">
                        <Label Content="行尾"/>
                        <ComboBox x:Name="cmbLineEnding" Width="100" VerticalAlignment="Center" SelectionChanged="cmbLineEnding_SelectionChanged">
                            <ComboBoxItem Content="无行尾" Tag=""/>
                            <ComboBoxItem Content="CR (\r)" Tag="\r"/>
                            <ComboBoxItem Content="LF (\n)" Tag="\n" IsSelected="True"/>
                            <ComboBoxItem Content="CRLF (\r\n)" Tag="\r\n" />
                        </ComboBox>
                    </StackPanel>
                    
                </StackPanel>
            </GroupBox>
        </Grid>
            
    </Grid>
</Window>
